{"ast":null,"code":"import _classCallCheck from \"/home/ramona/Workspace/SAC/ProiectSAC/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ramona/Workspace/SAC/ProiectSAC/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ramona/Workspace/SAC/ProiectSAC/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ramona/Workspace/SAC/ProiectSAC/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ramona/Workspace/SAC/ProiectSAC/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/ramona/Workspace/SAC/ProiectSAC/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/ramona/Workspace/SAC/ProiectSAC/frontend/src/components/Book.js\";\n\n/* Copyright (C) Maria-Ramona Raducu - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Maria-Ramona Raducu <raducu.ramona95@gmail.com>, December 2018\n*/\nimport React, { Component } from 'react';\nimport './Book.css';\nimport Button from 'react-bootstrap/lib/Button';\nimport { BootstrapTable, TableHeaderColumn } from 'react-bootstrap-table';\nimport { getJson, post } from \"../data/DataUtils\";\nimport Modal from './Modal';\nvar display = {\n  display: 'block',\n  width: '800px',\n  height: '800px',\n  left: '19%',\n  top: '30%'\n};\nvar hide = {\n  display: 'none'\n};\n\nvar Book =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Book, _Component);\n\n  function Book(props) {\n    var _this;\n\n    _classCallCheck(this, Book);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Book).call(this, props));\n    _this.state = {\n      idBook: _this.props.match.params.idBook,\n      detailsBook: [],\n      similarBooks: [],\n      toggle: false,\n      OK: '',\n      error: ''\n    };\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.buttonFormatter = _this.buttonFormatter.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleAddFavoriteBook = _this.handleAddFavoriteBook.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Book, [{\n    key: \"toggle\",\n    value: function toggle() {\n      var _this2 = this;\n\n      console.log(\"idBOOOK:::: \" + this.state.idBook);\n      this.setState(function (prevState) {\n        return {\n          toggle: !prevState.toggle\n        };\n      }); // TODO adaugi cartea la favorite\n\n      post(\"favorite\", {\n        \"idUser\": 1,\n        \"idBook\": this.state.idBook\n      }).then(function (response) {\n        console.log(\"RASPUNS FAVORITE BOOK::: \" + response.OK);\n\n        _this2.setState({\n          addFavoriteBook: response\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var obj = {\n        \"idBook\": this.state.idBook\n      };\n      console.log(\"OBJ::: \", obj);\n      post(\"bookById\", obj).then(function (response) {\n        _this3.setState({\n          detailsBook: response\n        });\n      }); //   post(\"similarBooks\", obj).then(response => {\n      //        this.setState({\n      //                     similarBooks: response,\n      //        })\n      //   });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(id) {\n      var _this4 = this;\n\n      post(\"bookById\", {\n        'idBook': id\n      }).then(function (response) {\n        _this4.setState({\n          detailsBook: response,\n          show: false\n        });\n      }); //        post(\"similarBooks\", {'idBook': id}).then(response => {\n      //            this.setState({similarBooks: response})\n      //        });\n    }\n  }, {\n    key: \"handleAddFavoriteBook\",\n    value: function handleAddFavoriteBook(idBook, idUser) {\n      var _this5 = this;\n\n      console.log(\"idUser:: \", idUser);\n      console.log(\"idBook:: \", idBook); // TODO adaugi cartea la favorite\n\n      post(\"favorite\", {\n        \"idUser\": idUser,\n        \"idBook\": idBook\n      }).then(function (response) {\n        console.log(\"RASPUNS FAVORITE BOOK::: \" + response);\n\n        _this5.setState({\n          OK: response.OK,\n          error: response.error\n        });\n      }); // TODO in funtie de raspuns afisezi raspunsul in modala\n    }\n  }, {\n    key: \"buttonFormatter\",\n    value: function buttonFormatter(cell, row) {\n      var _this6 = this;\n\n      console.log(\"row= \", row.id);\n      var path = \"/book/\" + row.id;\n      return React.createElement(Button, {\n        onClick: function onClick() {\n          return _this6.handleClick(row.id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Details Book\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(\"OK:::    \" + this.state.OK);\n      console.log(\"ERROR:::    \" + this.state.error);\n      var modal = [];\n\n      if (this.state.OK == 'ok') {\n        modal.push(React.createElement(\"div\", {\n          className: \"modal\",\n          style: this.state.toggle ? display : hide,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"modal-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, \"Add favorite book\"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, \"You have successfully added the book to your favorites list\"), React.createElement(\"div\", {\n          className: \"modal-footer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          className: \"btn\",\n          onClick: this.toggle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, \"Agree\")))));\n      }\n\n      if (this.state.error == 'cannot set favorite book') {\n        modal.push(React.createElement(\"div\", {\n          className: \"modal\",\n          style: this.state.toggle ? display : hide,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"modal-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, \"Add favorite book\"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, \"Cannot set favorite book\"), React.createElement(\"div\", {\n          className: \"modal-footer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          className: \"btn\",\n          onClick: this.toggle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, \"Agree\")))));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, modal, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, this.state.detailsBook.title), React.createElement(\"div\", {\n        id: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"first\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          \"text-align\": \"justify\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-light\",\n        onClick: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Add favorite\")), \"\\xA0\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \" Author: \"), \" \", this.state.detailsBook.author), \"\\xA0\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \" Description: \"), \" \", this.state.detailsBook.description), \"\\xA0\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \" Price: \"), \" \", this.state.detailsBook.price, \" Ron\"), \"\\xA0\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \" Pages: \"), \" \", this.state.detailsBook.pages), \"\\xA0\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \" Publisher: \"), \" \", this.state.detailsBook.publisher), \"\\xA0\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \" Language: \"), \" \", this.state.detailsBook.language), \"\\xA0\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \" Customer Reviews: \"), \" \", this.state.detailsBook.customer_reviews), \"\\xA0\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \" Stars: \"), \" \", this.state.detailsBook.stars))), React.createElement(\"div\", {\n        id: \"second\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(BootstrapTable, {\n        data: this.state.similarBooks,\n        striped: true,\n        hover: true,\n        search: true,\n        pagination: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(TableHeaderColumn, {\n        width: \"123\",\n        dataField: \"title\",\n        isKey: true,\n        dataAlign: \"center\",\n        dataSort: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"Title\"), React.createElement(TableHeaderColumn, {\n        width: \"123\",\n        dataField: \"author\",\n        dataSort: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Author\"), React.createElement(TableHeaderColumn, {\n        width: \"123\",\n        dataField: \"button\",\n        dataFormat: this.buttonFormatter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Details\")))));\n    }\n  }]);\n\n  return Book;\n}(Component);\n\nexport default Book;","map":{"version":3,"sources":["/home/ramona/Workspace/SAC/ProiectSAC/frontend/src/components/Book.js"],"names":["React","Component","Button","BootstrapTable","TableHeaderColumn","getJson","post","Modal","display","width","height","left","top","hide","Book","props","state","idBook","match","params","detailsBook","similarBooks","toggle","OK","error","bind","buttonFormatter","handleAddFavoriteBook","console","log","setState","prevState","then","response","addFavoriteBook","obj","id","show","idUser","cell","row","path","handleClick","modal","push","title","author","description","price","pages","publisher","language","customer_reviews","stars"],"mappings":"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","sourcesContent":["/* Copyright (C) Maria-Ramona Raducu - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Maria-Ramona Raducu <raducu.ramona95@gmail.com>, December 2018\n*/\n\nimport React, { Component } from 'react';\nimport './Book.css';\nimport Button from 'react-bootstrap/lib/Button';\nimport { BootstrapTable, TableHeaderColumn } from 'react-bootstrap-table';\nimport {getJson, post} from \"../data/DataUtils\";\nimport Modal from './Modal';\n\n\nconst display = {\n  display: 'block',\n  width: '800px',\n  height: '800px',\n  left: '19%',\n  top: '30%'\n\n\n};\nconst hide = {\n  display: 'none'\n};\n\nclass Book extends Component {\n constructor(props) {\n    super(props);\n\n    this.state = {\n        idBook: this.props.match.params.idBook,\n        detailsBook: [],\n        similarBooks: [],\n        toggle: false,\n        OK:'',\n        error:''\n    };\n        this.toggle = this.toggle.bind(this);\n        this.buttonFormatter = this.buttonFormatter.bind(this);\n        this.handleAddFavoriteBook = this.handleAddFavoriteBook.bind(this);\n  }\n   toggle() {\n\n console.log(\"idBOOOK:::: \" + this.state.idBook);\n     this.setState(prevState => ({\n       toggle: !prevState.toggle\n     }));\n\n\n // TODO adaugi cartea la favorite\n    post(\"favorite\", {\"idUser\": 1,\n                      \"idBook\": this.state.idBook}).then(response => {\n                      console.log(\"RASPUNS FAVORITE BOOK::: \" + response.OK);\n                this.setState({addFavoriteBook: response\n                              })\n            });\n   }\n\n\n componentDidMount() {\n\n   var obj = {\n          \"idBook\": this.state.idBook\n         };\n   console.log(\"OBJ::: \", obj);\n\n   post(\"bookById\", obj).then(response => {\n         this.setState({\n                      detailsBook: response,\n         })\n   });\n//   post(\"similarBooks\", obj).then(response => {\n//        this.setState({\n//                     similarBooks: response,\n//        })\n//   });\n\n  }\n\n handleClick(id) {\n        post(\"bookById\", {'idBook': id}).then(response => {\n            this.setState({detailsBook: response,\n            show: false\n            })\n        });\n//        post(\"similarBooks\", {'idBook': id}).then(response => {\n//            this.setState({similarBooks: response})\n//        });\n }\n\n handleAddFavoriteBook(idBook, idUser) {\n    console.log(\"idUser:: \", idUser);\n    console.log(\"idBook:: \", idBook);\n    // TODO adaugi cartea la favorite\n    post(\"favorite\", {\"idUser\": idUser,\n                      \"idBook\": idBook}).then(response => {\n                      console.log(\"RASPUNS FAVORITE BOOK::: \" + response);\n                this.setState({OK: response.OK,\n                               error: response.error\n                              })\n            });\n    // TODO in funtie de raspuns afisezi raspunsul in modala\n\n }\n\n\n  buttonFormatter(cell, row){\n        console.log(\"row= \", row.id);\n        var path = \"/book/\" + row.id;\n      return  <Button onClick={() => this.handleClick(row.id)}>Details Book\n              </Button>\n  }\n\n  render() {\n\nconsole.log(\"OK:::    \" + this.state.OK );\nconsole.log(\"ERROR:::    \" + this.state.error);\n\n  var modal = [];\n\n  if(this.state.OK == 'ok') {\n    modal.push(\n      <div className=\"modal\"   style={this.state.toggle ? display : hide}>\n      <div className=\"modal-content\">\n        <h4>Add favorite book</h4>\n        <p>You have successfully added the book to your favorites list</p>\n        <div className=\"modal-footer\">\n            <a className=\"btn\" onClick={this.toggle}>Agree</a>\n        </div>\n      </div>\n    </div>\n    );\n  }\n\n    if (this.state.error == 'cannot set favorite book') {\n      modal.push(\n        <div className=\"modal\"   style={this.state.toggle ? display : hide}>\n        <div className=\"modal-content\">\n          <h4>Add favorite book</h4>\n          <p>Cannot set favorite book</p>\n          <div className=\"modal-footer\">\n              <a className=\"btn\" onClick={this.toggle}>Agree</a>\n          </div>\n        </div>\n      </div>\n      );\n    }\n\n    return (\n      <div>\n       {modal}\n        <h1>{this.state.detailsBook.title}</h1>\n        <div id=\"container\">\n            <div  id=\"first\">\n                <span style={{ \"text-align\": \"justify\"}}>\n                    <div>\n                         <button type=\"button\" class=\"btn btn-light\"  onClick={this.toggle}>Add favorite</button>\n                    </div>\n                       &nbsp;\n                    <div>\n                        <b> Author: </b> {this.state.detailsBook.author}\n                    </div>\n                       &nbsp;\n                    <div>\n                        <b> Description: </b> {this.state.detailsBook.description}\n                    </div>\n                        &nbsp;\n                    <div>\n                        <b> Price: </b> {this.state.detailsBook.price} Ron\n                    </div>\n                       &nbsp;\n                    <div>\n                        <b> Pages: </b> {this.state.detailsBook.pages}\n                    </div>\n                       &nbsp;\n                    <div>\n                        <b> Publisher: </b> {this.state.detailsBook.publisher}\n                    </div>\n                       &nbsp;\n                    <div>\n                        <b> Language: </b> {this.state.detailsBook.language}\n                    </div>\n                       &nbsp;\n\n                    <div>\n                    <b> Customer Reviews: </b> {this.state.detailsBook.customer_reviews}\n                    </div>\n                       &nbsp;\n                    <div>\n                    <b> Stars: </b> {this.state.detailsBook.stars}\n                    </div>\n                </span>\n            </div>\n            <div  id=\"second\" >\n                            <BootstrapTable data={this.state.similarBooks} striped={true} hover={true}  search pagination>\n                                  <TableHeaderColumn width=\"123\" dataField=\"title\" isKey={true} dataAlign=\"center\" dataSort={true}>Title</TableHeaderColumn>\n                                  <TableHeaderColumn width=\"123\" dataField=\"author\" dataSort={true}>Author</TableHeaderColumn>\n                                  <TableHeaderColumn width=\"123\" dataField=\"button\" dataFormat={this.buttonFormatter}>Details</TableHeaderColumn>\n                            </BootstrapTable>\n            </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Book;\n"]},"metadata":{},"sourceType":"module"}